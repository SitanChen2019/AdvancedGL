#version 400

layout( isolines ) in;


void main()
{
    float u = gl_TessCoord.x;

    vec3 p0 = gl_in[0].gl_Position.xyz;
    vec3 p1 = gl_in[1].gl_Position.xyz;
    vec3 p2 = gl_in[2].gl_Position.xyz;
    vec3 p3 = gl_in[3].gl_Position.xyz;

    float u_ = 1-u;

    float b0 = u_*u_*u_;
    float b1 = 3*u_*u_*u;
    float b2 = 3*u_*u*u;
    float b3 = u*u*u;

    vec3 p = p0*b0 + p1*b1 + p2*b2 + p3*b3;

    gl_Position = vec4(p,1);

}